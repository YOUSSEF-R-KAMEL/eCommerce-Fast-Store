import './polyfills.server.mjs';
import{a as I,b as M}from"./chunk-ZP243HVQ.mjs";import{c as p,d as C,e as F,g,h as S,i as _,j as N,l as w}from"./chunk-ZRVASMXO.mjs";import"./chunk-UOETFI2Q.mjs";import{h as v,p as b}from"./chunk-H5VVROCV.mjs";import{B as y}from"./chunk-YXLOMBLC.mjs";import{Ab as u,Jb as f,Qb as h,Ra as n,S as s,Y as i,ba as d,jb as a,rb as m,sb as l,tb as c}from"./chunk-33RGZEIL.mjs";import"./chunk-VVCT4QZE.mjs";var R=(()=>{class t{constructor(){this._httpClient=i(y)}order(o,e){let r=window.location.origin;return this._httpClient.post(`orders/checkout-session/${e}?url=${r}`,o)}static{this.\u0275fac=function(e){return new(e||t)}}static{this.\u0275prov=s({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var z=(()=>{class t{constructor(){this.cartId=null,this.fb=i(N),this._orderService=i(R),this._activatedRoute=i(v),this.orderForm=this.fb.group({details:["",[p.required]],phone:["",[p.required,p.pattern(/^01[0-2,5]{1}[0-9]{8}$/)]],city:["",p.required]}),this.cartId=this._activatedRoute.snapshot.paramMap.get("id")}onSubmit(){this.orderForm.valid?this._orderService.order(this.orderForm.value,this.cartId).subscribe({next:o=>{window.open(o.session.url,"_self")}}):this.orderForm.markAllAsTouched()}static{this.\u0275fac=function(e){return new(e||t)}}static{this.\u0275cmp=d({type:t,selectors:[["app-order"]],standalone:!0,features:[h],decls:11,vars:4,consts:[[1,"w-50","mx-auto","my-3"],[3,"ngSubmit","formGroup"],["type","text","label","details","formControlName","details"],["type","details",3,"control"],["type","tel","label","phone","formControlName","phone"],["type","phone",3,"control"],["type","text","label","city","formControlName","city"],["type","city",3,"control"],[1,"text-end"],["type","submit",1,"btn-main"]],template:function(e,r){e&1&&(m(0,"section",0)(1,"form",1),u("ngSubmit",function(){return r.onSubmit()}),c(2,"app-input",2)(3,"app-error",3)(4,"app-input",4)(5,"app-error",5)(6,"app-input",6)(7,"app-error",7),m(8,"div",8)(9,"button",9),f(10,"Check out"),l()()()()),e&2&&(n(),a("formGroup",r.orderForm),n(2),a("control",r.orderForm.get("details")),n(2),a("control",r.orderForm.get("phone")),n(2),a("control",r.orderForm.get("city")))},dependencies:[w,g,C,F,S,_,b,I,M]})}}return t})();export{z as OrderComponent};
